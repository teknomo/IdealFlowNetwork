

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IFN Tutorial for General Network &mdash; Ideal Flow Network (IFN) 1.5.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=66a50015"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=4825356b"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="IFN Tutorial" href="IFNtutorial.html" />
    <link rel="prev" title="Ideal Flow Network (IFN) - Beginner’s Guide" href="BeginnerGuide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Ideal Flow Network (IFN)
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="BeginnerGuide.html">Ideal Flow Network (IFN) - Beginner’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="BeginnerGuide.html#Basic-Use-of-IFN">Basic Use of IFN</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">IFN Tutorial for General Network</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#How-to-Install">How to Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Using-Ideal-Flow-Network">Using Ideal Flow Network</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Notations">Notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Terminologies:">Terminologies:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#General-Network">General Network</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Path">Path</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Find-Path">Find Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Find-All-Possible-Paths">Find All Possible Paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Shortest-Path">Shortest Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#All-Shortest-Path">All Shortest Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Testing-Path">Testing Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Set-Path">Set Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Network-Properties">Network Properties</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#More-Examples">More Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Ideal-Flow-Network">Ideal Flow Network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="IFNtutorial.html">IFN Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="IFN4OtherFields.html">How to Apply IFN in Your Field of Study?</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_data_table.html">IFN for Classification of Data Table (Supervised Learning)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_data_table.html#Transportation-Mode-Choice">Transportation Mode Choice</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_NLP.html">IFN Tutorial for Natural Language Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="IFNspirituality.html">IFN Spirituality, System Thinking and Morality</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_structure.html">Data Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit_tests.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="IdealFlow.html">Ideal Flow Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">IdealFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_management.html">Data Management Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="node_management.html">Node Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="link_management.html">Link Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow_management.html">Flow Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="adjList.html">Adjacency List Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="path.html">Path and Trajectory Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="network_indices.html">Network Indices</a></li>
<li class="toctree-l1"><a class="reference internal" href="network_operation.html">Network Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrix.html">Matrix Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="stochastic.html">Stochastic and Probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="markov.html">Markov Chain Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="query_methods.html">Query and Search Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="neighborhood.html">Neighborhood</a></li>
<li class="toctree-l1"><a class="reference internal" href="ifn.html">Ideal Flow Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="random_walk.html">Random Walk and Random Cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="entropy.html">Entropy</a></li>
<li class="toctree-l1"><a class="reference internal" href="cycle_analysis.html">Cycle Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="signature_analysis.html">Signature Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">Utilities and Helper Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_science_ai.html">Data Science, Machine Learning and Artificial Intelligence</a></li>
<li class="toctree-l1"><a class="reference internal" href="MarkovOrder.html">Tutorial on Markov Order</a></li>
<li class="toctree-l1"><a class="reference internal" href="transportation_analysis.html">Transportation Analysis</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Ideal Flow Network (IFN)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">IFN Tutorial for General Network</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="IFN-Tutorial-for-General-Network">
<h1>IFN Tutorial for General Network<a class="headerlink" href="#IFN-Tutorial-for-General-Network" title="Permalink to this heading"></a></h1>
<p>by <a class="reference external" href="https://people.revoledu.com/kardi/">Kardi Teknomo</a></p>
<section id="How-to-Install">
<h2>How to Install<a class="headerlink" href="#How-to-Install" title="Permalink to this heading"></a></h2>
<p>You need to have Python installed. Go to <a class="reference external" href="https://pypi.org/project/IdealFlowNetwork/">Pypi.org</a> and find IdealFlowNetwork version 1.5.1 (or latest version)</p>
<blockquote>
<div><p>pip install IdealFlowNetwork</p>
</div></blockquote>
<p>Alternatively, download the zip file from <a class="reference external" href="https://github.com/teknomo/IdealFlowNetwork">GitHub</a>, unzip the file in a folder. 1. Go to folder <em>pkg</em></p>
<blockquote>
<div><p>cd <em>your_folder_name</em><code class="docutils literal notranslate"><span class="pre">/pkg</span></code></p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>In command Prompt &gt; <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code></p></li>
</ol>
<blockquote>
<div><p>pip install .</p>
</div></blockquote>
<p>It copies the package files to your Python environment. If you computer does not have pip, check <a class="reference external" href="https://pip.pypa.io/en/stable/installation/#ensurepip">ensurepip documentation</a></p>
</section>
<section id="Using-Ideal-Flow-Network">
<h2>Using Ideal Flow Network<a class="headerlink" href="#Using-Ideal-Flow-Network" title="Permalink to this heading"></a></h2>
<p>After the installation, to use IFN you need to import the module. To import, you can either use this style:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">IdealFlow</span> <span class="pre">import</span> <span class="pre">Network</span> <span class="pre">as</span> <span class="pre">net</span></code> # from package import module as alias, or</p>
</div></blockquote>
<p>or this style</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">IdealFlow.Network</span> <span class="pre">as</span> <span class="pre">net</span></code> # import package.module as alias</p>
</div></blockquote>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[145]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># from IdealFlow import Network as net  # from package import module as alias, or</span>
<span class="kn">import</span> <span class="nn">IdealFlow.Network</span> <span class="k">as</span> <span class="nn">net</span>         <span class="c1"># import package.module as alias</span>

<span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;IFN version:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Copyright:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">copyright</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
IFN version: 1.5.1
Copyright: © 2018-2024 Kardi Teknomo
</pre></div></div>
</div>
<section id="Notations">
<h3>Notations<a class="headerlink" href="#Notations" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>A = Adjacency matrix</p></li>
<li><p>B = Incidence matrix</p></li>
<li><p>C = Capacity matrix</p></li>
<li><p>F = Flow matrix</p></li>
<li><p>G = Congestion matrix</p></li>
<li><p>S = Stochastic matrix</p></li>
<li><p>sR = sum of rows</p></li>
<li><p>sC = sum of columns</p></li>
<li><p>kappa = <span class="math notranslate nohighlight">\(\kappa\)</span> = total flow in the nework</p></li>
<li><p>pi = <span class="math notranslate nohighlight">\(\pi\)</span> = node vector (steady state)</p></li>
<li><p>[m,n] = matrix size</p></li>
</ul>
</section>
<section id="Terminologies:">
<h3>Terminologies:<a class="headerlink" href="#Terminologies:" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Path = trajectory = node sequence</p></li>
<li><p>Cycle = path that have the same start and end</p></li>
<li><p>Flow = link weight, or node weight</p></li>
</ul>
</section>
</section>
</section>
<section id="General-Network">
<h1>General Network<a class="headerlink" href="#General-Network" title="Permalink to this heading"></a></h1>
<p>The IFN class can be used for a general network, not just for ideal flow types. Using the Ideal Flow Network (IFN), you can create any network (i.e., directed graph) by adding nodes or links.</p>
<p>Begin by adding links by specifying the from node, to node, and optionally, a link weight (flow). The default link weight is 1. When adding a link, the nodes are automatically added. By default, when a link is added, its flow is set to one (if not specified otherwise). You can also explicitly set the link flow by specifying the flow value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">startNode</span><span class="p">,</span> <span class="n">endNode</span><span class="p">,</span> <span class="n">linkFlow</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">nodeName</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[146]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Nodes are created automatically when you add a link. To add an isolated node, you can use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">nodeName</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[147]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s1">&#39;isolated node&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We can show the network</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>The total link flow, <span class="math notranslate nohighlight">\(\kappa\)</span>, is shown in the network title when displaying the IFN.</p>
<p>The available layout options are: None, ‘Bipartite’, ‘Circular’, ‘Fruchterman’, ‘Kawai’, ‘Planar’, ‘Random’, ‘Shell’, ‘Spectral’, ‘Spiral’, and ‘Spring’.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[148]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_10_0.png" src="_images/tutorial_10_0.png" />
</div>
</div>
<p>Deleting a node means deleting all the links connecting to that node.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">delete_node</span><span class="p">(</span><span class="n">nodeName</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[149]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">delete_node</span><span class="p">(</span><span class="s2">&quot;isolated node&quot;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_12_0.png" src="_images/tutorial_12_0.png" />
</div>
</div>
<p>If we repeat <em>add_link</em> to the existing link, the link flow (i.e. link weight) will be added.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[150]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>    <span class="c1"># now link a-&gt;d has flow of 2</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># now link a-&gt;b has flow of 5</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_14_0.png" src="_images/tutorial_14_0.png" />
</div>
</div>
<p>We can set the link weight directly via <em>set_link_weight</em> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">set_link_weight</span><span class="p">(</span><span class="n">startNode</span><span class="p">,</span> <span class="n">endNode</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</pre></div>
</div>
<p>If you just want to add one flow, the following method simplify it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">set_link_weight_plus_1</span><span class="p">(</span><span class="n">startNode</span><span class="p">,</span> <span class="n">endNode</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, we can also set the link weight directly via <em>set_item</em> property:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="p">[</span><span class="n">startNode</span><span class="p">,</span> <span class="n">endNode</span><span class="p">]</span><span class="o">=</span><span class="n">weight</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[151]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">5</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">])</span>  <span class="c1"># prints 5</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
5
</pre></div></div>
</div>
<p>Link weight can be accessed via <em>get_item</em> of the network</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="p">[</span><span class="n">startNode</span><span class="p">,</span> <span class="n">endNode</span><span class="p">]</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[152]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[152]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
5
</pre></div></div>
</div>
<p>To delete a link by specifying the start and end nodes</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">delete_link</span><span class="p">(</span><span class="n">fromNode</span><span class="p">,</span><span class="n">toNode</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[153]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">delete_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_20_0.png" src="_images/tutorial_20_0.png" />
</div>
</div>
<p>A network is reprsented by adjacency list or weighted adjacency matrix.</p>
<p>Printing the network would yield the adjacency list</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[154]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;adjacency list =</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
adjacency list =
 {&#39;a&#39;: {&#39;c&#39;: 1, &#39;d&#39;: 2}, &#39;b&#39;: {&#39;c&#39;: 1, &#39;e&#39;: 3}, &#39;c&#39;: {&#39;e&#39;: 5}, &#39;d&#39;: {&#39;c&#39;: 5}, &#39;e&#39;: {&#39;a&#39;: 3}}
</pre></div></div>
</div>
<p>We can also see the weighted adjacency matrix. The matrix is accompanied by the list of nodes in the same order as in the matrix.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">matrix</span><span class="p">,</span> <span class="n">list_node</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[155]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">F</span><span class="p">,</span><span class="n">list_node</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;matrix =&#39;</span><span class="p">,</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;list of nodes =&#39;</span><span class="p">,</span><span class="n">list_node</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
matrix = [[0, 0, 1, 2, 0], [0, 0, 1, 0, 3], [0, 0, 0, 0, 5], [0, 0, 5, 0, 0], [3, 0, 0, 0, 0]]

list of nodes = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]

</pre></div></div>
</div>
<p>To get the list nodes, use <em>nodes</em> property.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">nodes</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[156]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nodes =&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
nodes = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]

</pre></div></div>
</div>
<p>To get of dictionary of flows in each node, use <em>nodes_flow</em> property.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">nodes_flow</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[157]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nodes =&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">nodes_flow</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
nodes = {&#39;a&#39;: 3, &#39;b&#39;: 4, &#39;c&#39;: 5, &#39;d&#39;: 5, &#39;e&#39;: 3}

</pre></div></div>
</div>
<p>The total number of nodes can be access via <em>total_nodes</em> property.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">total_nodes</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[158]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">total_nodes</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[158]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
5
</pre></div></div>
</div>
<p>We list the links in the network via <em>get_links</em> property.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">get_links</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[159]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">get_links</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[159]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[&#39;a&#39;, &#39;c&#39;],
 [&#39;a&#39;, &#39;d&#39;],
 [&#39;b&#39;, &#39;c&#39;],
 [&#39;b&#39;, &#39;e&#39;],
 [&#39;c&#39;, &#39;e&#39;],
 [&#39;d&#39;, &#39;c&#39;],
 [&#39;e&#39;, &#39;a&#39;]]
</pre></div></div>
</div>
<p>The total number of links ### Total Links</p>
<p>The total number of links can be access via <em>total_links</em> property.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">total_links</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[160]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">total_links</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[160]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
7
</pre></div></div>
</div>
<p>We can reverse the direction of all links. The result is another network.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">reverse_network</span><span class="p">()</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[161]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">()</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>

<span class="n">nT</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">reverse_network</span><span class="p">()</span>

<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
<span class="n">nT</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_36_0.png" src="_images/tutorial_36_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_36_1.png" src="_images/tutorial_36_1.png" />
</div>
</div>
<p>When we reverse the direction, the adjacency matrix is transposed.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[162]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">F0</span><span class="p">,</span><span class="n">nodes0</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;original network</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">F0</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">F1</span><span class="p">,</span><span class="n">nodes1</span><span class="o">=</span><span class="n">nT</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;reverse network</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">F1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
original network
 [[0, 1, 5, 1, 0], [0, 0, 1, 0, 3], [0, 0, 0, 0, 1], [0, 0, 5, 0, 0], [3, 0, 0, 0, 0]]

reverse network
 [[0, 0, 0, 0, 3], [1, 0, 0, 0, 0], [5, 1, 0, 5, 0], [1, 0, 0, 0, 0], [0, 3, 1, 0, 0]]
</pre></div></div>
</div>
<section id="Path">
<h2>Path<a class="headerlink" href="#Path" title="Permalink to this heading"></a></h2>
<section id="Find-Path">
<h3>Find Path<a class="headerlink" href="#Find-Path" title="Permalink to this heading"></a></h3>
<p>Once we have define the network, we can get path from the network. Ths path is not necessarily the shortest path.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">find_path</span><span class="p">(</span><span class="n">startNode</span><span class="p">,</span> <span class="n">endNode</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[163]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;path a-&gt;e =&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">find_path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">),</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_40_0.png" src="_images/tutorial_40_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
path a-&gt;e = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;e&#39;]

</pre></div></div>
</div>
<p>If path does not exist, it return empty list</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[164]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">find_path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[164]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[]
</pre></div></div>
</div>
<p>We cannot find path to itself because it would just return <em>itself</em>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[165]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">find_path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[165]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;a&#39;]
</pre></div></div>
</div>
</section>
<section id="Find-All-Possible-Paths">
<h3>Find All Possible Paths<a class="headerlink" href="#Find-All-Possible-Paths" title="Permalink to this heading"></a></h3>
<p>We can find all possible paths from a startNode to endNode</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">find_all_paths</span><span class="p">(</span><span class="n">startNode</span><span class="p">,</span> <span class="n">endNode</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[166]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;all paths a-&gt;e =</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">find_all_paths</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
all paths a-&gt;e =
 [[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;e&#39;], [&#39;a&#39;, &#39;b&#39;, &#39;e&#39;], [&#39;a&#39;, &#39;c&#39;, &#39;e&#39;], [&#39;a&#39;, &#39;d&#39;, &#39;c&#39;, &#39;e&#39;]]
</pre></div></div>
</div>
</section>
<section id="Shortest-Path">
<h3>Shortest Path<a class="headerlink" href="#Shortest-Path" title="Permalink to this heading"></a></h3>
<p>We can also get the shortest path. Shortest path is a path with minimum number of links. We can get the shortest path by <em>shortest_path</em> method</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">startNode</span><span class="p">,</span> <span class="n">endNode</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[167]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shortest path a-&gt;e =&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">),</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
shortest path a-&gt;e = [&#39;a&#39;, &#39;b&#39;, &#39;e&#39;]

</pre></div></div>
</div>
<p>To get the total weights along the shortest path, we use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">path_distance</span><span class="p">(</span><span class="n">startNode</span><span class="p">,</span> <span class="n">endNode</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[168]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">path_distance</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[168]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
4
</pre></div></div>
</div>
<p>If we know the path as node sequence (i.e. trajectory) then we can also get the the total weights along the trajectory.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">path_sum_weight</span><span class="p">(</span><span class="n">trajectory</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[169]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">path_sum_weight</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[169]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
3
</pre></div></div>
</div>
</section>
<section id="All-Shortest-Path">
<h3>All Shortest Path<a class="headerlink" href="#All-Shortest-Path" title="Permalink to this heading"></a></h3>
<p>We can find all shortest path matrix.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">all_shortest_path</span><span class="p">()</span>
</pre></div>
</div>
<p><em>all_shortest_path</em> method produces a path matrix. The path matrix entries is the sum of link weights if there is a path and <em>inf</em> if no path exist.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[170]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;all shortest path:&#39;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">all_shortest_path</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
all shortest path:
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[170]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
([[6, 1, 2, 1, 3],
  [5, 6, 1, 6, 2],
  [4, 5, 6, 5, 1],
  [9, 10, 5, 10, 6],
  [3, 4, 5, 4, 6]],
 [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;])
</pre></div></div>
</div>
</section>
<section id="Testing-Path">
<h3>Testing Path<a class="headerlink" href="#Testing-Path" title="Permalink to this heading"></a></h3>
<p>Testing if a trajectory (i.e. node sequence) is a path</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">is_path</span><span class="p">(</span><span class="n">trajectory</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[171]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is a-&gt;b-&gt;d a path?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_path</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">]),</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is a-&gt;b-&gt;d a path? False

</pre></div></div>
</div>
</section>
<section id="Set-Path">
<h3>Set Path<a class="headerlink" href="#Set-Path" title="Permalink to this heading"></a></h3>
<p>Let us set that node sequence as a path in the network by expanding the network.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[172]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">set_path</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Now we can check if the same node sequence above is already a path.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[173]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is a-&gt;b-&gt;d a path?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_path</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">]),</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is a-&gt;b-&gt;d a path? True

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_60_1.png" src="_images/tutorial_60_1.png" />
</div>
</div>
</section>
<section id="Network-Properties">
<h3>Network Properties<a class="headerlink" href="#Network-Properties" title="Permalink to this heading"></a></h3>
<p>The example below we also shows network properties after we define the network.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[174]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">IdealFlow.Network</span> <span class="k">as</span> <span class="nn">net</span>     <span class="c1"># import package.module as alias</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">()</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;Beijing&quot;</span><span class="p">,</span><span class="s2">&quot;New York&quot;</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;New York&quot;</span><span class="p">,</span><span class="s2">&quot;London&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;London&quot;</span><span class="p">,</span><span class="s2">&quot;Berlin&quot;</span><span class="p">,</span><span class="mi">9</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;New York&quot;</span><span class="p">,</span><span class="s2">&quot;Toronto&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;New York&quot;</span><span class="p">,</span><span class="s2">&quot;Tokyo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;Tokyo&quot;</span><span class="p">,</span><span class="s2">&quot;Berlin&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;Tokyo&quot;</span><span class="p">,</span><span class="s2">&quot;Beijing&quot;</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;Beijing&quot;</span><span class="p">,</span><span class="s2">&quot;Toronto&quot;</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;Berlin&quot;</span><span class="p">,</span><span class="s2">&quot;Beijing&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;Toronto&quot;</span><span class="p">,</span><span class="s2">&quot;Tokyo&quot;</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s2">&quot;Circular&quot;</span><span class="p">);</span>

<span class="c1"># showing a few network properties</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Network:&#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>                          <span class="c1"># string representation is an adjacency list</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total Nodes:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">total_nodes</span><span class="p">)</span>           <span class="c1"># number of nodes</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total Links:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">total_links</span><span class="p">)</span>           <span class="c1"># number of links</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of Links:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">get_links</span><span class="p">)</span>           <span class="c1"># list of  links</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of Nodes:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>           <span class="c1"># list of  links</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total Flow:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">total_flow</span><span class="p">)</span>             <span class="c1"># total flow</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Network Entropy:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">network_entropy</span><span class="p">)</span>   <span class="c1"># network entropy</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Coef. Variantion of Flow:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">cov_flow</span><span class="p">)</span> <span class="c1"># coef. variation of flow</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Node Flow:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">nodes_flow</span><span class="p">)</span>              <span class="c1"># dictonary of {node name: sum of flow in node}</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Link Flow from &#39;Tokyo&#39; to &#39;Berlin&#39; is&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">get_link_flow</span><span class="p">(</span><span class="s1">&#39;Tokyo&#39;</span><span class="p">,</span><span class="s1">&#39;Berlin&#39;</span><span class="p">))</span>  <span class="c1"># specific link flow from and to node</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_connected?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>         <span class="c1"># undirected connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_strongly_connected?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">)</span> <span class="c1"># directed connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_premagic?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_premagic</span><span class="p">)</span>           <span class="c1"># balance of flow test</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is ideal flow?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">)</span>       <span class="c1"># ideal flow test</span>
<span class="n">n</span>                                             <span class="c1"># network name</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_62_0.png" src="_images/tutorial_62_0.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Network: {&#39;Beijing&#39;: {&#39;New York&#39;: 7, &#39;Toronto&#39;: 7}, &#39;New York&#39;: {&#39;London&#39;: 10, &#39;Toronto&#39;: 8, &#39;Tokyo&#39;: 1}, &#39;London&#39;: {&#39;Berlin&#39;: 9}, &#39;Berlin&#39;: {&#39;Beijing&#39;: 5}, &#39;Toronto&#39;: {&#39;Tokyo&#39;: 15}, &#39;Tokyo&#39;: {&#39;Berlin&#39;: 5, &#39;Beijing&#39;: 11}}
Total Nodes: 6
Total Links: 10
List of Links: [[&#39;Beijing&#39;, &#39;New York&#39;], [&#39;Beijing&#39;, &#39;Toronto&#39;], [&#39;New York&#39;, &#39;London&#39;], [&#39;New York&#39;, &#39;Toronto&#39;], [&#39;New York&#39;, &#39;Tokyo&#39;], [&#39;London&#39;, &#39;Berlin&#39;], [&#39;Berlin&#39;, &#39;Beijing&#39;], [&#39;Toronto&#39;, &#39;Tokyo&#39;], [&#39;Tokyo&#39;, &#39;Berlin&#39;], [&#39;Tokyo&#39;, &#39;Beijing&#39;]]
List of Nodes: [&#39;Beijing&#39;, &#39;Berlin&#39;, &#39;London&#39;, &#39;New York&#39;, &#39;Tokyo&#39;, &#39;Toronto&#39;]
Total Flow: 78
Network Entropy: 2.171231309893255
Coef. Variantion of Flow: 0.14707313230461527
Node Flow: {&#39;Beijing&#39;: 14, &#39;New York&#39;: 19, &#39;London&#39;: 9, &#39;Berlin&#39;: 5, &#39;Toronto&#39;: 15, &#39;Tokyo&#39;: 16}
Link Flow from &#39;Tokyo&#39; to &#39;Berlin&#39; is 5
is_connected? True
is_strongly_connected? True
is_premagic? False
is ideal flow? False
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[174]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

</pre></div></div>
</div>
<p>As an exercise, can you balance the flows in the network above such that the sum of inflows is equal to the sum of ouflows?</p>
</section>
</section>
<section id="More-Examples">
<h2>More Examples<a class="headerlink" href="#More-Examples" title="Permalink to this heading"></a></h2>
<p>Below are more several examples on how to create networks and showing its properties.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[175]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># example of any network, not necessarily ideal flow</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;general network with self-loop and an isolated node&quot;</span><span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>     <span class="c1"># we add self loop</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>           <span class="c1"># we add a node alone</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>                <span class="c1"># show the network</span>

<span class="c1"># showing network properties</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Network:&#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>                 <span class="c1"># string representation is an adjacency list</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total Nodes:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">total_nodes</span><span class="p">)</span> <span class="c1"># number of nodes</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total Links:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">total_links</span><span class="p">)</span> <span class="c1"># number of links</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of Links:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">get_links</span><span class="p">)</span> <span class="c1"># list of  links</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of Nodes:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="c1"># list of  links</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total Flow:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">total_flow</span><span class="p">)</span>   <span class="c1"># total flow</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Node Flow:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">nodes_flow</span><span class="p">)</span>     <span class="c1"># dictonary of {node name: sum of flow in node}</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Link Flow from b to c is&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">get_link_flow</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">))</span>  <span class="c1"># specific link flow from node &#39;b&#39; to node &#39;c&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_connected?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>         <span class="c1"># undirected connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_strongly_connected?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">)</span> <span class="c1"># directed connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_premagic?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_premagic</span><span class="p">)</span>           <span class="c1"># balance of flow test</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is ideal flow?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">)</span>       <span class="c1"># ideal flow test</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_65_0.png" src="_images/tutorial_65_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Network: {&#39;a&#39;: {&#39;b&#39;: 1}, &#39;b&#39;: {&#39;c&#39;: 3}, &#39;c&#39;: {&#39;a&#39;: 1, &#39;e&#39;: 1}, &#39;e&#39;: {&#39;e&#39;: 5}, &#39;d&#39;: {}}
Total Nodes: 5
Total Links: 5
List of Links: [[&#39;a&#39;, &#39;b&#39;], [&#39;b&#39;, &#39;c&#39;], [&#39;c&#39;, &#39;a&#39;], [&#39;c&#39;, &#39;e&#39;], [&#39;e&#39;, &#39;e&#39;]]
List of Nodes: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]
Total Flow: 11
Node Flow: {&#39;a&#39;: 1, &#39;b&#39;: 3, &#39;c&#39;: 2, &#39;e&#39;: 5, &#39;d&#39;: 0}
Link Flow from b to c is 3
is_connected? True
is_strongly_connected? False
is_premagic? False
is ideal flow? False
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[176]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;Random Irreducible Network&quot;</span><span class="p">)</span>
<span class="n">numNode</span><span class="o">=</span><span class="mi">5</span>                         <span class="c1"># number of nodes</span>
<span class="n">numLink</span><span class="o">=</span><span class="n">numNode</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">numNode</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># number of links</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Design Total Nodes:&quot;</span><span class="p">,</span><span class="n">numNode</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Design Total Links:&#39;</span><span class="p">,</span><span class="n">numLink</span><span class="p">)</span>

<span class="c1"># using static methods to generate matrix and test matrix</span>
<span class="n">C</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">rand_irreducible</span><span class="p">(</span><span class="n">numNode</span><span class="p">,</span><span class="n">numLink</span><span class="p">)</span>        <span class="c1"># generate random irreducible matrix</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;C=&quot;</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Is Irreducible:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_irreducible_matrix</span><span class="p">(</span><span class="n">C</span><span class="p">))</span> <span class="c1"># irreducibility test</span>

<span class="n">listNodes</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">alphabet_list</span><span class="p">(</span><span class="n">numNode</span><span class="p">)</span>  <span class="c1"># generate list of alphabetical node names, or</span>
<span class="c1"># listNodes=range(1,numNode+1)        # generate list of numbers for node names</span>
<span class="n">n</span><span class="o">.</span><span class="n">set_matrix</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">listNodes</span><span class="p">)</span>          <span class="c1"># put the matrix into network</span>

<span class="c1"># showing network properties</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total Nodes:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">total_nodes</span><span class="p">)</span> <span class="c1"># number of nodes</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total Links:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">total_links</span><span class="p">)</span> <span class="c1"># number of links</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of Links:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">get_links</span><span class="p">)</span> <span class="c1"># list of  links</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of Nodes:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="c1"># list of  links</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;totalFlow:&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">total_flow</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nodesFlow&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">nodes_flow</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="s2">&quot;Fruchterman&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Design Total Nodes: 5
Design Total Links: 8
C= [[0. 0. 0. 1. 0.]
 [1. 0. 0. 0. 0.]
 [1. 1. 1. 1. 0.]
 [0. 0. 0. 0. 1.]
 [0. 0. 1. 0. 0.]]

Is Irreducible: True
Total Nodes: 5
Total Links: 8
List of Links: [[&#39;a&#39;, &#39;d&#39;], [&#39;b&#39;, &#39;a&#39;], [&#39;c&#39;, &#39;a&#39;], [&#39;c&#39;, &#39;b&#39;], [&#39;c&#39;, &#39;c&#39;], [&#39;c&#39;, &#39;d&#39;], [&#39;d&#39;, &#39;e&#39;], [&#39;e&#39;, &#39;c&#39;]]
List of Nodes: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]
totalFlow: 8.0
nodesFlow {&#39;a&#39;: 1.0, &#39;b&#39;: 1.0, &#39;c&#39;: 4.0, &#39;d&#39;: 1.0, &#39;e&#39;: 1.0}
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_66_1.png" src="_images/tutorial_66_1.png" />
</div>
</div>
<p>Example of generating capacity matrix</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[177]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example usage</span>
<span class="kn">from</span> <span class="nn">IdealFlow</span> <span class="kn">import</span> <span class="n">Network</span> <span class="k">as</span> <span class="n">net</span>

<span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;new example network&quot;</span><span class="p">)</span>
<span class="n">k</span><span class="o">=</span><span class="mi">9</span>
<span class="n">m</span><span class="o">=</span><span class="n">k</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">k</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="n">C</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">rand_irreducible</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">m</span><span class="p">)</span> <span class="c1"># k nodes, m links</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;C=&quot;</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
C= [[0. 0. 0. 0. 0. 0. 1. 0. 1.]
 [0. 0. 1. 0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0. 0. 1. 1.]
 [1. 0. 0. 0. 0. 1. 0. 0. 0.]
 [0. 0. 0. 0. 0. 1. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0. 1. 1. 0.]
 [0. 0. 0. 0. 1. 0. 0. 0. 0.]
 [0. 1. 0. 0. 0. 1. 0. 0. 0.]
 [0. 0. 1. 1. 0. 0. 0. 0. 0.]]

</pre></div></div>
</div>
<p>Example below would generate a capacity matrix, and convert it into adjacency matrix, stochastic matrix and ideal flow matrix and finally scaling the IFN into an integer IFN.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[178]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># another shorter way to access IFN</span>
<span class="kn">import</span> <span class="nn">IdealFlow.Network</span> <span class="k">as</span> <span class="nn">net</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;random example network&quot;</span><span class="p">)</span>
<span class="n">k</span><span class="o">=</span><span class="mi">4</span>
<span class="n">m</span><span class="o">=</span><span class="n">k</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">k</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="n">C</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">rand_irreducible</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">m</span><span class="p">)</span> <span class="c1"># k nodes, m links</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;C=&quot;</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">A</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">capacity_to_adjacency</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A=&quot;</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">S</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">capacity_to_stochastic</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;S=&quot;</span><span class="p">,</span><span class="n">S</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">F</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">capacity_to_ideal_flow</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;F=&quot;</span><span class="p">,</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">scaling</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">global_scaling</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;scaling:&#39;</span><span class="p">,</span><span class="n">scaling</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">F1</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">equivalent_ifn</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="n">scaling</span><span class="p">)</span>
<span class="n">F1</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
C= [[0. 0. 1. 1.]
 [0. 1. 0. 1.]
 [0. 1. 0. 1.]
 [1. 0. 0. 0.]]

A= [[0 0 1 1]
 [0 1 0 1]
 [0 1 0 1]
 [1 0 0 0]]

S= [[0.  0.  0.5 0.5]
 [0.  0.5 0.  0.5]
 [0.  0.5 0.  0.5]
 [1.  0.  0.  0. ]]

F= [[0.         0.         0.16666667 0.16666667]
 [0.         0.08333333 0.         0.08333333]
 [0.         0.08333333 0.         0.08333333]
 [0.33333333 0.         0.         0.        ]]

scaling: 12

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[178]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([[0., 0., 2., 2.],
       [0., 1., 0., 1.],
       [0., 1., 0., 1.],
       [4., 0., 0., 0.]])
</pre></div></div>
</div>
<p>In the example below, we manually created the netwok by adding links. Then we get the capacity matrix and list nodes. We convert back the capacity matrix ino stochastic matrix. We convert stochastic matrix into markov node flows <span class="math notranslate nohighlight">\(\pi\)</span>. Then we compute ideal flow matrix from the stochastic matrix and node flow vector. After that, we update the internal probability values before we show it. Then we defne a node sequence as a trajectory and get its path entropy. Based on the path entropy, we
can find the match of ideal flow network name id. The last features is useful when you have many IFNs and would like to select which IFN match with the trajectory.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[179]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">IdealFlow.Network</span> <span class="k">as</span> <span class="nn">net</span>

<span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;Test Network1&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;n.name: &#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;adjacency list:&#39;</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is idealflow?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">)</span>
<span class="n">C</span><span class="p">,</span><span class="n">listNodes</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="n">C</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;listNodes&#39;</span><span class="p">,</span><span class="n">listNodes</span><span class="p">)</span>
<span class="n">S</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">capacity_to_stochastic</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="n">pi</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">markov</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pi:&#39;</span><span class="p">,</span><span class="n">pi</span><span class="p">)</span>
<span class="n">F</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">ideal_flow</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">pi</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;F:&#39;</span><span class="p">,</span><span class="n">F</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">set_matrix</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="n">listNodes</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is idealflow?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">network_prob</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">network_probability</span>                 <span class="c1"># need to update network probability before output it</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">network_prob</span><span class="p">)</span>
<span class="n">nodeSequence</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pathEntropy1&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">get_path_entropy</span><span class="p">(</span><span class="n">nodeSequence</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">nodeSequence</span><span class="p">,{</span><span class="s2">&quot;abgh&quot;</span><span class="p">:</span><span class="n">n</span><span class="p">}),</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;net&quot;</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;node values&quot;</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">nodes_flow</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;max link flow=&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">max_flow</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
n.name:  Test Network1
adjacency list: {&#39;a&#39;: {&#39;b&#39;: 5}, &#39;b&#39;: {&#39;c&#39;: 1, &#39;d&#39;: 6}, &#39;c&#39;: {&#39;e&#39;: 1}, &#39;d&#39;: {&#39;e&#39;: 6}, &#39;e&#39;: {&#39;a&#39;: 5, &#39;b&#39;: 2}}
is idealflow? True
C [[0, 5, 0, 0, 0], [0, 0, 1, 6, 0], [0, 0, 0, 0, 1], [0, 0, 0, 0, 6], [5, 2, 0, 0, 0]]
listNodes [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]
pi: [[0.19230769]
 [0.26923077]
 [0.03846154]
 [0.23076923]
 [0.26923077]]
F: [[0.         0.19230769 0.         0.         0.        ]
 [0.         0.         0.03846154 0.23076923 0.        ]
 [0.         0.         0.         0.         0.03846154]
 [0.         0.         0.         0.         0.23076923]
 [0.19230769 0.07692308 0.         0.         0.        ]]
is idealflow? True
{}
{&#39;a&#39;: {&#39;b&#39;: 0.19230769230769218}, &#39;b&#39;: {&#39;c&#39;: 0.03846153846153843, &#39;d&#39;: 0.23076923076923062}, &#39;c&#39;: {&#39;e&#39;: 0.03846153846153836}, &#39;d&#39;: {&#39;e&#39;: 0.23076923076923095}, &#39;e&#39;: {&#39;a&#39;: 0.19230769230769254, &#39;b&#39;: 0.07692307692307701}}
pathEntropy1 0.4727965657843897
(&#39;Test Network1&#39;, 1.0)

net {&#39;a&#39;: {&#39;b&#39;: 0.1923076923076921}, &#39;b&#39;: {&#39;c&#39;: 0.038461538461538415, &#39;d&#39;: 0.2307692307692305}, &#39;c&#39;: {&#39;e&#39;: 0.038461538461538346}, &#39;d&#39;: {&#39;e&#39;: 0.23076923076923084}, &#39;e&#39;: {&#39;a&#39;: 0.19230769230769246, &#39;b&#39;: 0.07692307692307698}}

node values {&#39;a&#39;: 0.1923076923076921, &#39;b&#39;: 0.26923076923076894, &#39;c&#39;: 0.038461538461538346, &#39;d&#39;: 0.23076923076923084, &#39;e&#39;: 0.26923076923076944}
max link flow= 0.23076923076923084
</pre></div></div>
</div>
<p>In the network below, the initial network is an ideal flow, which is premagic and ireducible.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[180]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set up initial network</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;Initial Network&quot;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">]</span>              <span class="c1"># path of unlearn</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">routes</span><span class="o">=</span><span class="n">path</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="s2">&quot;Kawai&quot;</span><span class="p">);</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_connected?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>         <span class="c1"># undirected connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_strongly_connected?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">)</span> <span class="c1"># directed connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_premagic?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_premagic</span><span class="p">)</span>           <span class="c1"># balance of flow test</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is idealflow?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">)</span>        <span class="c1"># irreducible and premagic</span>
<span class="n">n</span><span class="o">.</span><span class="n">network_probability</span>                 <span class="c1"># need to update network probability before output it</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Network Probability: &#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">network_prob</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_74_0.png" src="_images/tutorial_74_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is_connected? True
is_strongly_connected? True
is_premagic? True
is idealflow? True
Network Probability:  {&#39;a&#39;: {&#39;b&#39;: 0.19230769230769232}, &#39;b&#39;: {&#39;c&#39;: 0.038461538461538464, &#39;d&#39;: 0.23076923076923078}, &#39;c&#39;: {&#39;e&#39;: 0.038461538461538464}, &#39;d&#39;: {&#39;e&#39;: 0.23076923076923078}, &#39;e&#39;: {&#39;a&#39;: 0.19230769230769232, &#39;b&#39;: 0.07692307692307693}}
</pre></div></div>
</div>
<p>Then we set a path where the network is unlearned. It means along the path, the flow would be subtracted by one. When the flow is initially one, then the link that contains zero flow would be removed from the network. The result is weakly connected network with a sink node <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[181]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">adjList</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>                     <span class="c1"># get adjacency list of initial network</span>
<span class="n">n1</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;Network after Unlearned&quot;</span><span class="p">)</span>   <span class="c1"># create new network</span>
<span class="n">n1</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">adjList</span><span class="p">)</span>                        <span class="c1"># copy data from Initial Network</span>
<span class="n">n1</span><span class="o">.</span><span class="n">unlearn</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>                          <span class="c1"># unlearn</span>
<span class="n">n1</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="s2">&quot;Spring&quot;</span><span class="p">);</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_connected?&quot;</span><span class="p">,</span><span class="n">n1</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>         <span class="c1"># undirected connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_strongly_connected?&quot;</span><span class="p">,</span><span class="n">n1</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">)</span> <span class="c1"># directed connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_premagic?&quot;</span><span class="p">,</span><span class="n">n1</span><span class="o">.</span><span class="n">is_premagic</span><span class="p">)</span>           <span class="c1"># balance of flow test</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is idealflow?&#39;</span><span class="p">,</span><span class="n">n1</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">)</span>   <span class="c1"># after unlearn, it is no longer ideal flow</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is premagic network?&#39;</span><span class="p">,</span><span class="n">n1</span><span class="o">.</span><span class="n">is_premagic</span><span class="p">)</span>

<span class="n">C</span><span class="p">,</span><span class="n">listNodes</span><span class="o">=</span><span class="n">n1</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is irreducible matrix?&#39;</span><span class="p">,</span><span class="n">n1</span><span class="o">.</span><span class="n">is_irreducible_matrix</span><span class="p">(</span><span class="n">C</span><span class="p">))</span>   <span class="c1"># not ideal flow because not irreducible</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is premagic matrix?&#39;</span><span class="p">,</span><span class="n">n1</span><span class="o">.</span><span class="n">is_premagic_matrix</span><span class="p">(</span><span class="n">C</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is ideal flow matrix?&#39;</span><span class="p">,</span><span class="n">n1</span><span class="o">.</span><span class="n">is_ideal_flow_matrix</span><span class="p">(</span><span class="n">C</span><span class="p">))</span>

<span class="n">n1</span><span class="o">.</span><span class="n">network_probability</span>                 <span class="c1"># need to update network probability before output it</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Network Probability: &#39;</span><span class="p">,</span><span class="n">n1</span><span class="o">.</span><span class="n">network_prob</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_76_0.png" src="_images/tutorial_76_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is_connected? True
is_strongly_connected? False
is_premagic? False
is idealflow? False
is premagic network? False
is irreducible matrix? False
is premagic matrix? False
is ideal flow matrix? False
Network Probability:  {&#39;a&#39;: {&#39;b&#39;: 0.20833333333333331}, &#39;b&#39;: {&#39;c&#39;: 0.041666666666666664, &#39;d&#39;: 0.20833333333333331}, &#39;d&#39;: {&#39;e&#39;: 0.25}, &#39;e&#39;: {&#39;a&#39;: 0.20833333333333331, &#39;b&#39;: 0.08333333333333333}}
</pre></div></div>
</div>
<p>The next code is to demonstrate that Weakly Connected Network cannot become IFN. Due to the existence of the sink node, the stochastic matrix contains zero row. The matrix is reducible. Therefore, it cannot be transformed into an ideal flow network.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[182]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n2</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;Network with Sink node cannot become IFN&quot;</span><span class="p">)</span>   <span class="c1"># create new network</span>
<span class="n">S</span><span class="o">=</span><span class="n">n2</span><span class="o">.</span><span class="n">capacity_to_stochastic</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">,</span><span class="n">S</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">F</span><span class="o">=</span><span class="n">n2</span><span class="o">.</span><span class="n">stochastic_to_ideal_flow</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;F=&#39;</span><span class="p">,</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">n2</span><span class="o">.</span><span class="n">set_matrix</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="n">listNodes</span><span class="p">)</span>
<span class="n">n2</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="s2">&quot;Kawai&quot;</span><span class="p">);</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_connected?&quot;</span><span class="p">,</span><span class="n">n2</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>         <span class="c1"># undirected connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_strongly_connected?&quot;</span><span class="p">,</span><span class="n">n2</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">)</span> <span class="c1"># directed connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_premagic?&quot;</span><span class="p">,</span><span class="n">n2</span><span class="o">.</span><span class="n">is_premagic</span><span class="p">)</span>           <span class="c1"># balance of flow test</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is idealflow?&#39;</span><span class="p">,</span><span class="n">n2</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">)</span>
<span class="n">n2</span><span class="o">.</span><span class="n">network_probability</span>              <span class="c1"># need to update network probability before output it</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Network Probability: &#39;</span><span class="p">,</span><span class="n">n2</span><span class="o">.</span><span class="n">network_prob</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
S [[0.         1.         0.         0.         0.        ]
 [0.         0.         0.16666667 0.83333333 0.        ]
 [0.         0.         0.         0.         0.        ]
 [0.         0.         0.         0.         1.        ]
 [0.71428571 0.28571429 0.         0.         0.        ]]

F= [[ 0.         19.04167548  0.          0.          0.        ]
 [ 0.          0.          4.54622382 22.7311191   0.        ]
 [ 0.          0.          0.          0.          0.        ]
 [ 0.          0.          0.          0.         23.93801565]
 [17.92363021  7.16945208  0.          0.          0.        ]]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_78_1.png" src="_images/tutorial_78_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is_connected? True
is_strongly_connected? False
is_premagic? False
is idealflow? False
Network Probability:  {&#39;a&#39;: {&#39;b&#39;: 0.19970269790557324}, &#39;b&#39;: {&#39;c&#39;: 0.04767926872559459, &#39;d&#39;: 0.23839634362797296}, &#39;c&#39;: {}, &#39;d&#39;: {&#39;e&#39;: 0.2510538693645723}, &#39;e&#39;: {&#39;a&#39;: 0.18797701455449065, &#39;b&#39;: 0.07519080582179624}}
</pre></div></div>
</div>
<p>Network below contains source node <code class="docutils literal notranslate"><span class="pre">c</span></code>. Due to the existence of the <em>source node</em> , the stochastic matrix contains zero column. The matrix is reducible. Therefore, it cannot be transformed into an ideal flow network.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[183]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n3</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;Network with Source node cannot become IFN&quot;</span><span class="p">)</span>   <span class="c1"># create new network</span>
<span class="n">St</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">T</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;S.T&#39;</span><span class="p">,</span><span class="n">St</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">F</span><span class="o">=</span><span class="n">n2</span><span class="o">.</span><span class="n">stochastic_to_ideal_flow</span><span class="p">(</span><span class="n">St</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;F=&#39;</span><span class="p">,</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">n3</span><span class="o">.</span><span class="n">set_matrix</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="n">listNodes</span><span class="p">)</span>
<span class="n">n3</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="kc">None</span><span class="p">);</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_connected?&quot;</span><span class="p">,</span><span class="n">n3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>         <span class="c1"># undirected connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_strongly_connected?&quot;</span><span class="p">,</span><span class="n">n3</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">)</span> <span class="c1"># directed connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_premagic?&quot;</span><span class="p">,</span><span class="n">n3</span><span class="o">.</span><span class="n">is_premagic</span><span class="p">)</span>           <span class="c1"># balance of flow test</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is idealflow?&#39;</span><span class="p">,</span><span class="n">n3</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">)</span>
<span class="n">n3</span><span class="o">.</span><span class="n">network_probability</span>            <span class="c1"># need to update network probability before output it</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Network Probability: &#39;</span><span class="p">,</span><span class="n">n3</span><span class="o">.</span><span class="n">network_prob</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
S.T [[0.         0.         0.         0.         0.71428571]
 [1.         0.         0.         0.         0.28571429]
 [0.         0.16666667 0.         0.         0.        ]
 [0.         0.83333333 0.         0.         0.        ]
 [0.         0.         0.         1.         0.        ]]

F= [[ 0.          0.          0.          0.         17.41491065]
 [23.45557664  0.          0.          0.          6.70159333]
 [ 0.          0.0461331   0.          0.          0.        ]
 [ 0.         22.08081013  0.          0.          0.        ]
 [ 0.          0.          0.         25.33441793  0.        ]]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_80_1.png" src="_images/tutorial_80_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is_connected? True
is_strongly_connected? False
is_premagic? False
is idealflow? False
Network Probability:  {&#39;a&#39;: {&#39;e&#39;: 0.1832503413653255}, &#39;b&#39;: {&#39;a&#39;: 0.24681392362927387, &#39;e&#39;: 0.07051826389407824}, &#39;c&#39;: {&#39;b&#39;: 0.0004854407405646304}, &#39;d&#39;: {&#39;b&#39;: 0.23234778956044813}, &#39;e&#39;: {&#39;d&#39;: 0.26658424081030957}}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[184]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">nodeSequence</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pathEntropy&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">get_path_entropy</span><span class="p">(</span><span class="n">nodeSequence</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">nodeSequence</span><span class="p">,{</span><span class="s2">&quot;abgh&quot;</span><span class="p">:</span><span class="n">n</span><span class="p">}),</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;network:&quot;</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;node values:&quot;</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">nodes_flow</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;max link flow=&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">max_flow</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_81_0.png" src="_images/tutorial_81_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pathEntropy 0
(&#39;Initial Network&#39;, 0)

network: {&#39;a&#39;: {&#39;b&#39;: 5}, &#39;b&#39;: {&#39;c&#39;: 1, &#39;d&#39;: 5}, &#39;d&#39;: {&#39;e&#39;: 6}, &#39;e&#39;: {&#39;a&#39;: 5, &#39;b&#39;: 2}}

node values: {&#39;a&#39;: 5, &#39;b&#39;: 6, &#39;d&#39;: 6, &#39;e&#39;: 7}
max link flow= 6
</pre></div></div>
</div>
<p>Now let us create a random irreducible network and do some testings</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[185]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;Capacity&quot;</span><span class="p">)</span>         <span class="c1"># create new network</span>
<span class="n">k</span><span class="o">=</span><span class="mi">5</span>                        <span class="c1"># number of nodes</span>
<span class="n">m</span><span class="o">=</span><span class="n">k</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">k</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>             <span class="c1"># number of links</span>
<span class="n">C</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">rand_irreducible</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">m</span><span class="p">)</span>   <span class="c1"># generate random irreducible matrix</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;C:&quot;</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is irreducible matrix?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_irreducible_matrix</span><span class="p">(</span><span class="n">C</span><span class="p">))</span>   <span class="c1"># not ideal flow because not irreducible</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is premagic matrix?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_premagic_matrix</span><span class="p">(</span><span class="n">C</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is ideal flow matrix?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow_matrix</span><span class="p">(</span><span class="n">C</span><span class="p">))</span>
<span class="n">n</span><span class="o">.</span><span class="n">set_matrix</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_connected?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_connected</span><span class="p">)</span>         <span class="c1"># undirected connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_strongly_connected?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">)</span> <span class="c1"># directed connectivity test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_premagic?&quot;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_premagic</span><span class="p">)</span>           <span class="c1"># balance of flow test</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is ideal flow?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">)</span>       <span class="c1"># ideal flow test</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
C: [[0. 0. 1. 0. 0.]
 [1. 1. 0. 0. 0.]
 [0. 0. 0. 0. 1.]
 [0. 1. 0. 1. 0.]
 [1. 0. 0. 1. 0.]]

is irreducible matrix? True
is premagic matrix? False
is ideal flow matrix? False
is_connected? True
is_strongly_connected? True
is_premagic? False
is ideal flow? False
{&#39;a&#39;: {&#39;c&#39;: 1.0}, &#39;b&#39;: {&#39;a&#39;: 1.0, &#39;b&#39;: 1.0}, &#39;c&#39;: {&#39;e&#39;: 1.0}, &#39;d&#39;: {&#39;b&#39;: 1.0, &#39;d&#39;: 1.0}, &#39;e&#39;: {&#39;a&#39;: 1.0, &#39;d&#39;: 1.0}}
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_83_1.png" src="_images/tutorial_83_1.png" />
</div>
</div>
<p>Let us create a new network that would balance the flow in each nodes such that the sum of inflows would be equal to the sum of outflows.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[186]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;IFN&quot;</span><span class="p">)</span>         <span class="c1"># create new network</span>
<span class="n">F1</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">capacity_to_ideal_flow</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">scaling</span><span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">global_scaling</span><span class="p">(</span><span class="n">F1</span><span class="p">,</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
<span class="n">F</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">equivalent_ifn</span><span class="p">(</span><span class="n">F1</span><span class="p">,</span><span class="n">scaling</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;F:&quot;</span><span class="p">,</span><span class="n">F</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is irreducible matrix?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_irreducible_matrix</span><span class="p">(</span><span class="n">F</span><span class="p">))</span>   <span class="c1"># not ideal flow because not irreducible</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is premagic matrix?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_premagic_matrix</span><span class="p">(</span><span class="n">F</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is ideal flow matrix?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow_matrix</span><span class="p">(</span><span class="n">F</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
F: [[0. 0. 2. 0. 0.]
 [1. 1. 0. 0. 0.]
 [0. 0. 0. 0. 2.]
 [0. 1. 0. 1. 0.]
 [1. 0. 0. 1. 0.]]

is irreducible matrix? True
is premagic matrix? True
is ideal flow matrix? True
</pre></div></div>
</div>
</section>
<section id="Ideal-Flow-Network">
<h2>Ideal Flow Network<a class="headerlink" href="#Ideal-Flow-Network" title="Permalink to this heading"></a></h2>
<p>Having a network does not mean it is Ideal Flow Network (IFN)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[187]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">IFN</span><span class="p">(</span><span class="s2">&quot;IFN&quot;</span><span class="p">)</span>         <span class="c1"># create new network</span>
<span class="n">C</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">rand_capacity</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;C:&#39;</span><span class="p">,</span><span class="n">C</span><span class="p">)</span>
<span class="n">F1</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">capacity_to_ideal_flow</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">scaling</span><span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">global_scaling</span><span class="p">(</span><span class="n">F1</span><span class="p">,</span><span class="s1">&#39;min&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">F</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">equivalent_ifn</span><span class="p">(</span><span class="n">F1</span><span class="p">,</span><span class="n">scaling</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;F:&#39;</span><span class="p">,</span><span class="n">F</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">set_matrix</span><span class="p">(</span><span class="n">F</span><span class="p">,[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">])</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
C: [[0. 0. 4. 1. 0.]
 [7. 0. 0. 0. 0.]
 [0. 0. 0. 0. 4.]
 [0. 0. 1. 0. 0.]
 [0. 6. 0. 0. 0.]]
F: [[0. 0. 4. 1. 0.]
 [5. 0. 0. 0. 0.]
 [0. 0. 0. 0. 5.]
 [0. 0. 1. 0. 0.]
 [0. 5. 0. 0. 0.]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_87_1.png" src="_images/tutorial_87_1.png" />
</div>
</div>
<p>Let us do it step by step.</p>
<p>First, let us test if the network is an ideal flow network</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[188]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is Ideal Flow?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is Ideal Flow? True

</pre></div></div>
</div>
<p>An ideal flow network must be both strongly connected and premagic. Let us test whether it is strongly connected</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[189]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is strongly connected?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is strongly connected? True

</pre></div></div>
</div>
<p>Let us test if the flows are balance in each node</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[190]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is premagic?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_premagic</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is premagic? True

</pre></div></div>
</div>
<p>To make strongly connected network into ideal flow network, first, let us assume the existing weight as capacity matrix</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[191]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">,</span><span class="n">list_node</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;list_node:&#39;</span><span class="p">,</span><span class="n">list_node</span><span class="p">)</span>
<span class="n">C</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
list_node: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[191]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0, 0, 4.0000000000000195, 1.0000000000000049, 0],
 [5.000000000000026, 0, 0, 0, 0],
 [0, 0, 0, 0, 5.000000000000024],
 [0, 0, 1.0, 0, 0],
 [0, 5.000000000000026, 0, 0, 0]]
</pre></div></div>
</div>
<p>Then we compute the ideal flow and scale it to integer</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[192]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">F1</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">capacity_to_ideal_flow</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="n">scaling</span><span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">global_scaling</span><span class="p">(</span><span class="n">F1</span><span class="p">,</span><span class="s1">&#39;min&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">F</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">equivalent_ifn</span><span class="p">(</span><span class="n">F1</span><span class="p">,</span><span class="n">scaling</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;F =&#39;</span><span class="p">,</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
F = [[0. 0. 4. 1. 0.]
 [5. 0. 0. 0. 0.]
 [0. 0. 0. 0. 5.]
 [0. 0. 1. 0. 0.]
 [0. 5. 0. 0. 0.]]

</pre></div></div>
</div>
<p>We replace the adjacency list of the network with the ideal flow matrix F. we can see the flow is in equilibrium such that total inflow is equal total outflow in each node.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[193]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">set_matrix</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="n">list_node</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;is Ideal Flow?&#39;</span><span class="p">,</span><span class="n">n</span><span class="o">.</span><span class="n">is_ideal_flow</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
is Ideal Flow? True

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_99_1.png" src="_images/tutorial_99_1.png" />
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="BeginnerGuide.html" class="btn btn-neutral float-left" title="Ideal Flow Network (IFN) - Beginner’s Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="IFNtutorial.html" class="btn btn-neutral float-right" title="IFN Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Kardi Teknomo.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>